105|         // Firebaseからメッセージを読み込む
106|         const messagesRef = ref(database, 'messages');
107|         onValue(messagesRef, (snapshot) => {
108|             const messages = snapshot.val();
109|             const messagesDiv = document.getElementById('messages');
110|             messagesDiv.innerHTML = '';
111|             for (const id in messages) {
112|                 const message = messages[id];
113|                 const messageDiv = document.createElement('div');
114|                 messageDiv.className = 'message';
115|                 messageDiv.innerHTML = `
116|                     <div class="author">${message.author ? message.author : "匿名"}</div>
117|                     <div class="content">${message.content}</div>
118|                     <div class="timestamp">${message.timestamp}</div>
119|                 `;
120|                 messagesDiv.appendChild(messageDiv);
121|             }
122|         });

123|         // メッセージをFirebaseに保存する
124|         document.getElementById('message-form').addEventListener('submit', function(event) {
125|             event.preventDefault();
126|             const author = document.getElementById('author').value;
127|             const content = document.getElementById('content').value;
128|             const now = new Date();
129|             const timestamp = now.toISOString().replace('T', ' ').substring(0, 19);
130|             push(messagesRef, {
131|                 author,
132|                 content,
133|                 timestamp
134|             });
135|             document.getElementById('author').value = '';
136|             document.getElementById('content').value = '';
137|         });
